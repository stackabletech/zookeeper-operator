---
role: Aggregator
customConfig:
  api:
    address: 0.0.0.0:8686
    enabled: true
  sources:
    vector:
      address: 0.0.0.0:6000
      type: vector
      version: "2"
  transforms:
    automaticLogConfigPrepare:
      type: filter
      inputs: [vector]
      condition: |-
        .pod == "test-zk-server-automatic-log-config-0" && .container == "prepare"
    automaticLogConfigVector:
      type: filter
      inputs: [vector]
      condition: |-
        .pod == "test-zk-server-automatic-log-config-0" && .container == "vector"
    automaticLogConfigZookeeper:
      type: filter
      inputs: [vector]
      condition: |-
        .pod == "test-zk-server-automatic-log-config-0" && .container == "zookeeper"
    customLogConfigPrepare:
      type: filter
      inputs: [vector]
      condition: |-
        .pod == "test-zk-server-custom-log-config-0" && .container == "prepare"
    customLogConfigVector:
      type: filter
      inputs: [vector]
      condition: |-
        .pod == "test-zk-server-custom-log-config-0" && .container == "vector"
    customLogConfigZookeeper:
      type: filter
      inputs: [vector]
      condition: |-
        .pod == "test-zk-server-custom-log-config-0" && .container == "zookeeper"
  sinks:
    out:
      type: blackhole
      inputs: [automaticLogConfig*, customLogConfig*]
